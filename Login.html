<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login - BYTROX SCRIPT</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@800&display=swap');

body {
  margin: 0;
  padding: 0;
  font-family: 'Orbitron', sans-serif;
  height: 100vh;
  background: black;
  color: white;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  overflow: hidden;
  text-shadow: 0 0 10px white;
}

canvas {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  z-index: -1;
}

.banner {
  width: 100%;
  background: rgba(0,0,0,0.7);
  font-size: 14px;
  text-align: center;
  white-space: nowrap;
  overflow: hidden;
}
.banner span {
  display: inline-block;
  padding-left: 100%;
  animation: scrollText 12s linear infinite;
}
@keyframes scrollText {
  from { transform: translateX(0); }
  to { transform: translateX(-100%); }
}

.logo {
  font-size: 2rem;
  text-transform: uppercase;
  margin-bottom: 370px;
  animation: fadeLogo 2s ease-in-out infinite alternate;
}
@keyframes fadeLogo {
  0% { opacity: 1; }
  50% { opacity: 0.3; }
  100% { opacity: 1; }
}

.card {
  background: rgba(0,0,0,0.6);
  padding: 25px;
  border-radius: 15px;
  box-shadow: 0 0 15px white;
  text-align: center;
  width: 90%;
  max-width: 210px;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

.code {
  font-size: 1.8em;
  margin-top: 10px;
  cursor: pointer;
}

.copyMsg {
  display: none;
  font-size: 0.9em;
  margin-top: 5px;
}

.btn, .active-btn {
  display: inline-block;
  margin-top: 20px;
  padding: 10px 25px;
  font-size: 1em;
  color: white;
  border-radius: 8px;
  text-decoration: none;
  transition: 0.3s;
  text-shadow: 0 0 8px white;
}

.btn {
  background: rgba(255,255,255,0.1);
  box-shadow: 0 0 15px white;
}
.btn:hover { box-shadow: 0 0 25px white; }

.active-btn {
  background: rgba(255,0,0,0.15);
  box-shadow: 0 0 15px red;
  border: 1px solid white;
}
.active-btn:active {
  transform: scale(0.96);
  box-shadow: 0 0 25px red;
}

#loadingOverlay {
  position: fixed;
  top:0;left:0;width:100%;height:100%;
  background:white;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  z-index:9999;
  color:black;
  font-weight:bold;
}
.spinner {
  border:5px solid #ccc;
  border-top:5px solid #000;
  border-radius:50%;
  width:50px;height:50px;
  animation: spin 1s linear infinite;
  margin-bottom:15px;
}
@keyframes spin { to{transform:rotate(360deg);} }
</style>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
</head>
<body>
<div id="loadingOverlay">
  <div class="spinner"></div>
  <div id="loadingText">connecting...</div>
</div>

<canvas id="matrix"></canvas>
<div class="banner"><span></span></div>
<div class="logo">ByTrox PredicTor</div>

<div class="card">
  <h2>Your Code</h2>
  <div id="deviceCode" class="code">Loading...</div>
  <div id="copyMsg" class="copyMsg">Copied</div>
  <a href="https://t.me/bytrox_1" class="btn">CONTACT US</a><br>
  <button class="active-btn" id="activeBtn">ACTIVATE</button>
</div>

<script>
const canvas = document.getElementById("matrix");
const ctx = canvas.getContext("2d");
canvas.width = innerWidth; canvas.height = innerHeight;
const letters = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";
const fontSize = 14;
const columns = Math.floor(canvas.width / fontSize);
const drops = Array(columns).fill(1);

function draw() {
  ctx.fillStyle = "rgba(0,0,0,0.2)";
  ctx.fillRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle = "#ffffff";
  ctx.font = fontSize + "px Orbitron";
  for (let i=0; i<drops.length; i++) {
    const text = letters[Math.floor(Math.random() * letters.length)];
    ctx.fillText(text, i*fontSize, drops[i]*fontSize);
    if (drops[i]*fontSize > canvas.height && Math.random() > 0.975) drops[i]=0;
    drops[i]++;
  }
}
setInterval(draw,60);

const firebaseConfig = {
  apiKey:"AIzaSyB1_XCbC777hKwxlilhMeq5Hpty1dvDT1I",
  authDomain:"giper-8fd92.firebaseapp.com",
  databaseURL:"https://giper-8fd92-default-rtdb.firebaseio.com",
  projectId:"giper-8fd92",
  storageBucket:"giper-8fd92.firebasestorage.app",
  messagingSenderId:"485740337398",
  appId:"1:485740337398:web:xxxxxx"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

let deviceId = localStorage.getItem("deviceId");
if (!deviceId) {
  deviceId = "dev_" + Math.random().toString(36).substr(2, 9);
  localStorage.setItem("deviceId", deviceId);
}
let deviceCode = localStorage.getItem("deviceCode");
if (!deviceCode) {
  const chars = "123456789QWERTYUIOPASDFGHJKLZXCVBNM";
  deviceCode = Array.from({length:10},()=>chars[Math.floor(Math.random()*chars.length)]).join("");
  localStorage.setItem("deviceCode", deviceCode);
  db.ref("crashpredict/" + deviceId).set({ code: deviceCode, active: false });
}
document.getElementById("deviceCode").innerText = deviceCode;

document.getElementById("deviceCode").onclick = () => {
  navigator.clipboard.writeText(deviceCode);
  const msg = document.getElementById("copyMsg");
  msg.style.display = "block";
  setTimeout(()=>msg.style.display="none",1000);
};

document.getElementById("activeBtn").onclick = () => {
  db.ref("crashpredict/" + deviceId).get().then(snap => {
    const data = snap.val();
    if (data && data.active === true) {
      window.location.href = "index.html";
    } else {
      alert("Not Activated");
    }
  });
};

setTimeout(()=>{document.getElementById("loadingText").textContent="initializing...";},1200);
setTimeout(()=>{document.getElementById("loadingOverlay").style.display="none";},1000);
</script>
</body>
</html>
